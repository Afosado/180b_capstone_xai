<!DOCTYPE html>
<html>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-teal.css">
<link rel="stylesheet" href="main.css">
<body onload="myInit()">

<div class="w3-card-4">
<div class="w3-container w3-theme w3-card" style="text-align:center">
  <h1><strong>Using Attention Maps and Counterfactuals to Explain Caption Generation Models</strong></h1>
</div>
<br> <br> <br>
<div style="text-align:center;">  
  <button id="home" type="button" onclick="location.href='index.html'">ANALYSIS</button>
  <button id="demo" type="button" onclick="location.href='demo.html'">DEMO</button>
</div>  
<div class="w3-container w3-text-theme" style="text-align:center;">
  <h2 >Demo</h2>
</div>
<p><b>INSTRUCTIONS</b>: Select an area of the image to "erase" it and click RUN MODEL to generate the counterfactual image, corresponding attention maps and object importance map. To see all selectable regions click the HIGHLIGHT ALL OBJECTS button. Use the CLEAR button to deselect selected region of the image. In order for this demo to work correctly please run it using a fullscreen window.</p>
<canvas id="myCanvas"></canvas>     <!-- gets re-positioned in myInit(); -->
<img id="demoImg" src="img/demoImg.jpg" usemap="#demoMap"/>
<map id="demoMap" name="demoMap">
  <area class="dog" shape="poly" onmouseover="myHover(this);" onmouseout="myLeave();" onclick="myClick(this);" coords="390.86, 518.57, 376.0, 520.92, 362.71, 513.1, 351.77, 499.81, 341.6, 488.08, 333.79, 473.23, 329.1, 464.63, 316.59, 466.19, 309.55, 466.97, 304.86, 479.48, 304.86, 484.96, 311.12, 491.21, 307.99, 495.12, 298.61, 496.68, 294.7, 489.65, 292.35, 478.7, 297.83, 464.63, 297.04, 460.72, 284.54, 452.9, 267.34, 441.18, 254.83, 431.01, 247.79, 425.54, 236.85, 435.7, 221.99, 445.09, 212.61, 448.99, 209.48, 453.68, 205.58, 466.97, 204.01, 474.01, 196.98, 472.45, 196.19, 462.28, 204.01, 445.87, 211.83, 431.8, 218.08, 422.41, 202.45, 438.83, 196.19, 433.36, 204.01, 427.1, 212.61, 420.07, 219.65, 401.31, 227.47, 392.71, 240.76, 389.58, 233.72, 374.73, 244.66, 366.13, 254.05, 381.76, 268.9, 385.67, 286.1, 393.49, 309.55, 398.96, 329.88, 404.43, 344.73, 403.65, 350.99, 399.74, 357.24, 389.58, 364.28, 398.18, 365.06, 402.87, 368.19, 390.36, 376.0, 388.8, 383.04, 398.18, 386.17, 405.21, 397.11, 409.12, 401.8, 415.38, 401.8, 423.98, 405.71, 430.23, 412.75, 436.49, 409.62, 444.3, 399.46, 448.21, 399.46, 454.47, 390.86, 456.03, 381.48, 448.21, 366.62, 445.09, 360.37, 447.43, 358.02, 455.25, 355.68, 466.19, 355.68, 474.01, 361.93, 484.17, 368.19, 495.12, 375.22, 502.94, 381.48, 510.75, 390.07, 517.01"/>
  <area class="man" shape="poly" onmouseover="myHover(this);" onmouseout="myLeave();" onclick="myClick(this);" coords="31.53, 288.98, 9.03, 284.29, 21.22, 264.6, 33.4, 255.23, 60.58, 241.16, 93.4, 236.48, 103.71, 213.04, 128.08, 213.04, 138.4, 235.54, 129.96, 263.66, 130.89, 282.41, 123.39, 306.79, 133.7, 315.22, 133.7, 344.28, 146.83, 355.53, 147.77, 368.66, 132.77, 377.09, 129.96, 395.84, 137.46, 401.47, 148.71, 402.4, 151.51, 408.02, 144.95, 415.53, 94.33, 416.46, 92.46, 396.77, 101.83, 386.46, 97.15, 380.84, 71.83, 383.66, 71.83, 391.15, 78.4, 393.03, 78.4, 405.22, 53.09, 399.59, 44.65, 377.09, 39.96, 366.78, 23.09, 349.91, 22.15, 320.85, 34.34, 290.85"/>
  <area class="skateboard" shape="poly" onmouseover="myHover(this);" onmouseout="myLeave();" onclick="myClick(this);" coords="149.34, 410.74, 164.92, 414.48, 173.03, 420.09, 177.39, 425.07, 176.14, 432.55, 172.4, 435.67, 165.55, 437.54, 161.81, 432.55, 156.2, 434.42, 151.84, 436.29, 148.72, 443.14, 144.36, 447.51, 134.39, 445.64, 130.65, 439.4, 132.52, 433.17, 136.88, 431.3, 143.11, 429.43, 147.47, 430.68, 151.21, 431.3, 148.1, 428.19, 147.47, 424.45, 144.36, 422.58, 136.26, 423.82, 119.43, 423.82, 110.08, 420.71, 101.98, 420.71, 101.98, 419.46, 120.68, 417.59, 135.63, 417.59, 143.11, 413.85, 150.59, 408.87"/>
  <area class="skateboard" shape="poly" onmouseover="myHover(this);" onmouseout="myLeave();" onclick="myClick(this);" coords="78.92, 393.91, 86.4, 397.03, 92.63, 398.9, 92.63, 405.75, 93.25, 413.23, 93.25, 416.97, 73.94, 413.23, 58.98, 408.24, 49.63, 406.37, 41.53, 411.98, 37.17, 409.49, 36.54, 407.62, 23.45, 410.11, 20.34, 411.36, 15.98, 416.97, 7.87, 420.09, 3.51, 417.59, 3.51, 410.11, 5.38, 407.0, 9.12, 405.75, 12.24, 403.88, 18.47, 405.75, 19.72, 403.88, 19.72, 398.9, 17.85, 395.78, 11.61, 393.91, 12.24, 389.55, 23.45, 388.3, 33.43, 387.68, 41.53, 388.92, 50.88, 389.55, 53.99, 391.42, 55.86, 397.03, 55.24, 397.65, 55.24, 402.01, 60.22, 404.5, 69.57, 403.26, 78.3, 402.64, 80.17, 399.52"/>
  <area class="car" shape="poly" onmouseover="myHover(this);" onmouseout="myLeave();" onclick="myClick(this);" coords="335.95, 88.29, 372.69, 95.77, 376.09, 116.86, 371.33, 125.71, 369.97, 129.11, 365.21, 131.83, 359.08, 136.59, 346.84, 133.87, 345.48, 126.39, 334.59, 132.51, 330.51, 132.51, 318.27, 125.71, 306.02, 120.95, 287.65, 124.35, 269.28, 125.03, 263.16, 129.11, 250.92, 129.11, 244.79, 125.71, 239.35, 125.71, 235.27, 129.79, 220.98, 129.79, 213.5, 122.99, 209.42, 118.91, 201.93, 113.46, 203.29, 86.25, 214.86, 86.25, 221.66, 86.25, 233.23, 82.17, 240.71, 81.49, 246.15, 82.17, 254.32, 84.89, 263.16, 72.64, 304.66, 73.32, 322.35, 78.09, 335.27, 86.25"/>
</map>
<div class="w3-container w3-text-theme" style="text-align:center;">  
  <p><b>Original Captions:</b></p>
  <p><b>A man riding a skateboard while being towed by a black and white dog.</b></p>
  <p><b>A man being pulled by a dog while on a skateboard.</b></p>
  <p><b>A person on a skateboard with a leash tied to a dog.</b></p>
  <p><b>A man on a skateboard and a dog on a leash.</b></p>
  <p><b>A man on a skateboard is pulled by a dog.</b></p>
</div> 
<div style="text-align:center;">  
  <button id="highlight" type="button" onclick="myHighlight();">HIGHLIGHT ALL OBJECTS</button>
</div>

<div style="text-align:center;">  
    <button id="run-model" type="button" onclick="runModel();">RUN MODEL</button>
    <button id="clear" type="button" onclick="myClear();">CLEAR</button>
</div> 

<table class="w3-container w3-text-theme" style="text-align:center;">
  <tr>
    <th><h2>Counterfactual</h2></th>
    <th><h2>Attention Map</h2></th>
  </tr>
  <tr>
    <td><img id="counter"></img></td>
    <td><img id="att" src="img/att/original.png"></img></td>
  </tr>
</table>

</div>
<br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> 

</body>
<script src="main.js"></script> 
</html>